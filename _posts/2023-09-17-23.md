---
title: "[AWS] ì›¹ì—ì„œ S3 íŒŒì¼ ì œì–´(CRUD) - 2. aws-sdk for javascript ì‚¬ìš©í•˜ê¸°"
date: 2023-09-17 23:28:00 +0900
categories: [DevOps, AWS]
tags: [aws, s3, amazon s3, api gateway, amazon api gateway, iam, iam role, amazon iam role, rest, rest api, next.js]
image:
    path: /assets/img/2023-09-17-23/2023-09-17-23-1.jpg
    alt: https://aws.amazon.com/pt/blogs/aws-brasil/
---

### ì´ì „ í¬ìŠ¤íŠ¸

[ì›¹ì—ì„œ S3 íŒŒì¼ ì œì–´(CRUD) - 1.API Gateway ì‚¬ìš©í•˜ê¸°](/posts/22)

&nbsp;

### ë‚´ìš©

AWSì—ì„œ ì œê³µí•˜ëŠ” íŒ¨í‚¤ì§€ì¸ aws-sdk for javascript v3ë¡œ Next.js í”„ë¡œì íŠ¸ì—ì„œ S3 íŒŒì¼ ì œì–´(CRUD)

- AWSì™€ Next.jsì˜ ê¸°ë³¸ ì‚¬ìš©ë²•ì„ ì•Œê³  ìˆë‹¤ëŠ” ê°€ì •í•˜ì— ì‘ì„±
- Vercel, GitHub Pages ë“± í˜¸ìŠ¤íŒ… í”Œë«í¼ ì„¤ì •ì€ ë‹¤ë£¨ì§€ ì•ŠìŒ
- API í†µì‹ ì€ Axiosë¥¼ ì‚¬ìš©, ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë‹¤ë£¨ì§€ ì•ŠìŒ

&nbsp;

### í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì œì‘í•œ í”„ë¡œì íŠ¸

<a href="https://nextjs-aws-test.vercel.app" target="_blank">https://nextjs-aws-test.vercel.app</a>

<a href="https://github.com/taedonn/nextjs-aws-test" target="_blank">https://github.com/taedonn/nextjs-aws-test</a>

&nbsp;

### ì„¤ì¹˜ íŒ¨í‚¤ì§€ ë° ë²„ì „

```json
"dependencies": {
    "@aws-sdk/client-s3": "^3.414.0",
    "@aws-sdk/s3-request-presigner": "^3.414.0",
    "eslint": "8.40.0",
    "eslint-config-next": "13.4.1",
    "next": "13.4.1",
    "react": "18.2.0",
    "react-dom": "18.2.0",
    "axios": "^1.4.0"
}
```

&nbsp;

### .env ì„¤ì •

> .envë€?
>
> environment variableì˜ ì•½ìë¡œ ì›¹ì´ë‚˜ ì•± ê°œë°œì„ í•  ë•Œ, ì™¸ë¶€ì— ê³µê°œí•˜ë©´ ì•ˆ ë˜ëŠ” ê°’ì„ ëª¨ì•„ë‘ëŠ” íŒŒì¼ì…ë‹ˆë‹¤. Vercel ê°™ì€ í˜¸ìŠ¤íŒ… í”Œë«í¼ì—ëŠ” ëŒ€ë¶€ë¶„ environment variablesë¥¼ ì¶”ê°€í•˜ëŠ” í˜ì´ì§€ê°€ ë”°ë¡œ ìˆê¸° ë•Œë¬¸ì— ë°°í¬í•  ë•Œ ê°™ì´ ì˜¬ë¦¬ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.
{: .prompt-tip }

```bash
# IAM ìœ ì € ë§Œë“  í›„ ìƒì„±í•œ ì—‘ì„¸ìŠ¤ í‚¤
MY_AWS_ACCESS_KEY='IAM ìœ ì € ì—‘ì„¸ìŠ¤ í‚¤'
MY_AWS_SECRET_KEY='IAM ìœ ì € ì‹œí¬ë¦¿ í‚¤'
MY_AWS_S3_BUCKET='ë²„í‚· ì´ë¦„'
```

Vercelì— ë°°í¬í•  ê³„íšì´ë¼ë©´ AWS_ACCESS_KEYì™€ AWS_SECRET_KEY ë“±ì€ ì´ë¯¸ ì§€ì •ë˜ì–´ ìˆë‹¤ê³  í•˜ê¸° ë•Œë¬¸ì—, ì¤‘ë³µ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì˜ˆì‹œì²˜ëŸ¼ í”¼í•´ì„œ ì‚¬ìš©í•˜ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.

&nbsp;

### AWS ì„¤ì •

ì´ë²ˆ í¬ìŠ¤íŠ¸ëŠ” ë…¸ë“œ íŒ¨í‚¤ì§€ì¸ aws-sdk for javascript v3ë¥¼ ì‚¬ìš©í•´ S3ë¥¼ ì œì–´í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ë‹¤ë£° ì˜ˆì •ì…ë‹ˆë‹¤. ë¨¼ì € AWSì—ì„œ ì–´ë–¤ ì„¤ì •ì„ í•´ì•¼ í•˜ëŠ”ì§€ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. AWSì˜ ê¸°ë³¸ì ì¸ ì‚¬ìš©ë²•ì€ <a href="/posts/22" target="_blank">ì´ì „ í¬ìŠ¤íŠ¸</a>ì—ì„œ ìì„¸íˆ ë‹¤ë¤˜ìœ¼ë‹ˆ ì°¸ê³  ë°”ëë‹ˆë‹¤.

#### IAM User ì¶”ê°€í•˜ê³  Access key  ìƒì„±

ê¸°ë³¸ì ìœ¼ë¡œ UserëŠ” Roleì´ë‘ ë™ì¼í•˜ê²Œ Policyë¥¼ ìƒì„±í•´ AWS ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì„ íšë“í•˜ëŠ” ê°œë…ì…ë‹ˆë‹¤ë§Œ, Userë¥¼ ì¶”ê°€í•˜ëŠ” ì´ìœ ëŠ” Next.js í™˜ê²½ì—ì„œ AWSì— ì ‘ê·¼í•  ë•Œ ì‚¬ìš©í•˜ëŠ” íŒ¨í‚¤ì§€ì¸ aws-sdk for javascript v3ì—ì„œ Userë³„ë¡œ ìƒì„±í•  ìˆ˜ ìˆëŠ” access keyì™€ secret access keyë¥¼ í•„ìš”ë¡œ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

> access keyì™€ secret access keyë€?
>
> ìœ ì €ë³„ë¡œ ìƒì„±í•  ìˆ˜ ìˆëŠ” ê³ ìœ  ì‹ë³„ìì…ë‹ˆë‹¤. ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ë¼ê³  ìƒê°í•˜ë©´ ì‰¬ìš¸ ê²ƒ ê°™ì€ë°, arnê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ë‚¨ë“¤ì—ê²Œ ë…¸ì¶œë˜ì§€ ì•Šê²Œ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.
{: .prompt-tip }

&nbsp;

Userë¥¼ ì¶”ê°€í•˜ê¸° ìœ„í•´ ë¨¼ì € IAM ì½˜ì†” ì‚¬ì´ë“œ ë©”ë‰´ì˜ Usersë¡œ ì´ë™í•œ í›„, Create user ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.

![IAM - Create user](/assets/img/2023-09-17-23/2023-09-17-23-2.png)

&nbsp;

ì´ë¦„ì„ ì •í•œ í›„ Next ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.

![IAM - User name](/assets/img/2023-09-17-23/2023-09-17-23-3.png)

&nbsp;

Attach policies directlyë¥¼ ì„ íƒí•˜ë©´ ë‚˜ì˜¤ëŠ” ê²€ìƒ‰ì°½ì— AmazonS3FullAccessë¥¼ ê²€ìƒ‰í•œ í›„ ì²´í¬í•´ ì¤€ ë‹¤ìŒ, Next ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤. ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™í•˜ë©´ ë‚´ê°€ ì…ë ¥í•œ ì •ë³´ë¥¼ í™•ì¸í•˜ëŠ” ì°½ì´ ë‚˜ì˜¤ëŠ”ë°, ì´ìƒì´ ì—†ìœ¼ë©´ Create user ë²„íŠ¼ì„ ëˆŒëŸ¬ Userë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

![IAM - Set permissions](/assets/img/2023-09-17-23/2023-09-17-23-4.png)

&nbsp;

ë‹¤ì‹œ IAM > Usersë¡œ ë“¤ì–´ê°€ì„œ ë°©ê¸ˆ ë‚´ê°€ ì¶”ê°€í•œ Userë¥¼ í´ë¦­í•´ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•œ í›„ Create access keyë¥¼ ëˆ„ë¦…ë‹ˆë‹¤.

![IAM - User](/assets/img/2023-09-17-23/2023-09-17-23-5.png)

&nbsp;

Access keyë¥¼ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í• ì§€ë¥¼ ì„ íƒí•˜ëŠ” ì°½ì¸ë°, ì €ëŠ” Application running outside AWSë¥¼ ì„ íƒí–ˆìŠµë‹ˆë‹¤. ì„ íƒì„ ì™„ë£Œí•˜ë©´ Next ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.

![IAM - Access key best practices & alternatives](/assets/img/2023-09-17-23/2023-09-17-23-6.png)

&nbsp;

ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™í•˜ë©´ descriptionì„ ì…ë ¥í•˜ëŠ” í˜ì´ì§€ê°€ ë‚˜ì˜¤ëŠ”ë°, í•„ìˆ˜ ì‚¬í•­ì´ ì•„ë‹Œ ì„ íƒ ì‚¬í•­ì´ê¸° ë•Œë¬¸ì— êµ³ì´ ì…ë ¥í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. Next ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤. ë‹¤ìŒ í˜ì´ì§€ì—ëŠ” ìƒì„±ëœ access keyì™€ secret access keyë¥¼ ë³¼ ìˆ˜ ìˆëŠ” í™”ë©´ì´ ë‚˜ì˜µë‹ˆë‹¤. **secret access keyëŠ” ì´ í™”ë©´ì„ ë‚˜ê°€ë©´ ìˆ¨ê¹€ ì²˜ë¦¬ë¼ì„œ ë‹¤ì‹œ ë³¼ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ê¼­ ë”°ë¡œ ì €ì¥í•´ ë‘ê¸° ë°”ëë‹ˆë‹¤.** ê·¸ë ‡ë‹¤ê³  ì‹¤ìˆ˜ë¡œ ë‚˜ê°”ë‹¤ê³  í•´ì„œ í°ì¼ì´ ë‚œ ê±´ ì•„ë‹ˆê³ , access keyë¥¼ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ìƒì„±í•˜ë©´ ë©ë‹ˆë‹¤.

![IAM - Create access key](/assets/img/2023-09-17-23/2023-09-17-23-7.png)

&nbsp;

### í”„ë¡ íŠ¸ ì„¤ê³„

1. `<input>` íƒœê·¸ë¥¼ í†µí•´ ì´ë¯¸ì§€ë¥¼ S3ë¡œ ì—…ë¡œë“œ
2. S3ì— ì—…ë¡œë“œëœ ì´ë¯¸ì§€ì˜ URL ë¦¬í„´
3. ë¦¬í„´ëœ ì´ë¯¸ì§€ì˜ URLì„ í™”ë©´ì— í‘œì‹œ

#### ë ˆì´ì•„ì›ƒ

ë ˆì´ì•„ì›ƒì€ ìµœëŒ€í•œ ë‹¨ìˆœí•˜ê²Œ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤. ë¶ˆëŸ¬ì˜¨ ì´ë¯¸ì§€ë¥¼ ë³´ì—¬ì¤„ ì´ë¯¸ì§€ íƒœê·¸ì™€, ì´ë¯¸ì§€ë¥¼ S3ì— ì—…ë¡œë“œí•  input íƒœê·¸ë¥¼ ë„£ì–´ì£¼ê³ , API í˜¸ì¶œì„ ìœ„í•´ Input íƒœê·¸ì—ëŠ” onChange ì´ë²¤íŠ¸ë¥¼ ë„£ì–´ì£¼ì–´ì„œ íŒŒì¼ ì¶”ê°€ ë° ë³€ê²½ì„ ì²´í¬í•©ë‹ˆë‹¤.

```html
<div>
    <img src={imgUrl} onerror="this.style.display='none';"/>
    <input onChange={uploadImg} id="imgUpload" type="file" accept="image/*"/>
</div>
```

#### API í˜¸ì¶œ

API í˜¸ì¶œ ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1. getSignedUrlì˜ PutObjectCommandë¥¼ í†µí•´ ì´ë¯¸ì§€ íŒŒì¼ì„ ì—…ë¡œë“œí•  ì„ì‹œ API ê²½ë¡œë¥¼ ë°›ì•„ì˜¨ë‹¤.
2. ì„ì‹œ API ê²½ë¡œë¡œ íŒŒì¼ì„ ì—…ë¡œë“œí•œë‹¤.
3. íŒŒì¼ì´ ì—…ë¡œë“œë˜ë©´ ë‹¤ì‹œ getSignedUrlì˜ GetObjectCommandë¥¼ í†µí•´ ì´ë¯¸ì§€ë¥¼ ì„ì‹œë¡œ ì½ì„ ìˆ˜ ìˆëŠ” URLì„ ë°›ì•„ì˜¨ë‹¤.
4. URLì„ ë°›ì•„ì˜¤ë©´ img íƒœê·¸ì˜ src ì†ì„±ê°’ì— í•´ë‹¹ URLì„ ë„£ì–´ì¤€ë‹¤.

```jsx
// ì´ë¯¸ì§€ URLì„ ì €ì¥í•  state
const [imgUrl, setImgUrl] = useState<string>('');

// Inputì— íŒŒì¼ ì—…ë¡œë“œ ì‹œ ì‹¤í–‰í•  í•¨ìˆ˜
const uploadImg = async (e: ChangeEvent<HTMLInputElement>) => {
	if (e.target.files && e.target.files[0]) {
        // ì—…ë¡œë“œ ëœ íŒŒì¼ ë³€ìˆ˜ë¡œ ì €ì¥
        const file = e.target.files[0];
        const fileType = file.name.split('.').pop();
        
        // API í˜¸ì¶œ
        await axios.post('/api/uploadimg', {
            fileName: 'test.' + fileType // test. + í™•ì¥ì
            fileType: file.type
        })
        .then(async (res) => {
            // getSignedUrlì˜ PutObjectCommandë¡œ ë°›ì•„ì˜¨ urlì— íŒŒì¼ ì—…ë¡œë“œ
            await axios.put(res.data.url, file, {
                headers: { 'Content-Type': file.type }
            })
            .then(async () => {
                // getSignedUrlì˜ GetObjectCommandë¡œ ë°›ì•„ì˜¨ urlì„ stateì— ì €ì¥
                await axios.get('/api/uploadimg', {
                    params: {
                        fileName: 'test.' + fileType
                    }
                })
                .then((res) => {
                    // stateê°’ì„ ë°›ì•„ì˜¨ URLë¡œ ë³€ê²½
                    setImgUrl(res.data.url);
                })
            })
        })
        .catch(err => console.log(err));
    }
}
```

#### í”„ë¡ íŠ¸ ì „ì²´ ì½”ë“œ

```jsx
// react hooks
import { useState } from 'react';

// api
import axios from 'axios';

const Index = () => {
    // ì´ë¯¸ì§€ URLì„ ì €ì¥í•  state
    const [imgUrl, setImgUrl] = useState<string>('');

    // Inputì— íŒŒì¼ ì—…ë¡œë“œ ì‹œ ì‹¤í–‰í•  í•¨ìˆ˜
    const uploadImg = async (e: React.ChangeEvent<HTMLInputElement>) => {
        if (e.target.files && e.target.files[0]) {
            // ì—…ë¡œë“œ ëœ íŒŒì¼ ë³€ìˆ˜ë¡œ ì €ì¥
            const file = e.target.files[0];
            const fileType = file.name.split('.').pop();

            // API í˜¸ì¶œ
            await axios.post('/api/uploadimg', {
                fileName: 'test.' + fileType, // test. + í™•ì¥ì
                fileType: file.type
            })
            .then(async (res) => {
                // getSignedUrlì˜ PutObjectCommandë¡œ ë°›ì•„ì˜¨ urlì— íŒŒì¼ ì—…ë¡œë“œ
                await axios.put(res.data.url, file, {
                    headers: { 'Content-Type': file.type }
                })
                .then(async () => {
                    // getSignedUrlì˜ GetObjectCommandë¡œ ë°›ì•„ì˜¨ urlì„ stateì— ì €ì¥
                    await axios.get('/api/uploadimg', {
                        params: {
                            fileName: 'test.' + fileType
                        }
                    })
                    .then((res) => {
                        // stateê°’ì„ ë°›ì•„ì˜¨ URLë¡œ ë³€ê²½
                        setImgUrl(res.data.url);
                    })
                })
            })
            .catch(err => console.log(err));
        }
    }
    
    return (
    	<div>
            <img src={imgUrl} onerror="this.style.display='none';"/>
            <input onChange={uploadImg} id="imgUpload" type="file" accept="image/*"/>
        </div>
    )
}

export default Index;
```

&nbsp;

### API ì„¤ê³„

- POSTë¡œ ìš”ì²­ì´ ì™”ì„ ë•Œ, getSignedUrlì˜ PutObjectCommandë¡œ ë°›ì€ URLì„ JSONìœ¼ë¡œ ë¦¬í„´
- GETìœ¼ë¡œ ìš”ì²­ì´ ì™”ì„ ë•Œ, getSignedUrlì˜ GetObjectCommandë¡œ ë°›ì€ URLì„ JSONìœ¼ë¡œ ë¦¬í„´

#### S3 í´ë¼ì´ì–¸íŠ¸ ì—°ê²°

aws-sdkë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë¨¼ì € S3 í´ë¼ì´ì–¸íŠ¸ì— ì—°ê²°í•´ì•¼ í•©ë‹ˆë‹¤. ì´ì „ì— ì¶”ê°€í•œ access keyì™€ secret access keyë¥¼ ì‚¬ìš©í•´ ì•„ë˜ì™€ ê°™ì´ í´ë¼ì´ì–¸íŠ¸ì— ì—°ê²°í•©ë‹ˆë‹¤.

```jsx
const s3 = new S3Client({
    credentials: {
        accessKeyId: process.env.MY_AWS_ACCESS_KEY as string,
        secretAccessKey: process.env.MY_AWS_SECRET_KEY as string
    },
    region: 'ap-northeast-2'
});
const s3Bucket = process.env.MY_AWS_S3_BUCKET as string;
```

#### POST ìš”ì²­ ì‹œ

```jsx
if (req.method === 'POST') {
    // ë³€ìˆ˜ ì €ì¥
    const fileName = req.body.fileName;
    const fileType = req.body.fileType;
    const putParams = {
        Bucket: s3Bucket,
        Key: fileName,
        ContentType: fileType,
    }
    
    // getSignedUrlì˜ PutObjectCommandë¡œ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•  URL ê²½ë¡œ ë°›ê¸°
    const url = await getSignedUrl(s3, new PutObjectCommand(putParams), {expiresIn: 3600});
    
    // JSONìœ¼ë¡œ URL ì „ë‹¬
    return res.status(200).json({
        url: url,
        msg: "POST ìš”ì²­ ì„±ê³µ"
    });
}
```

#### GET ìš”ì²­ ì‹œ

```jsx
if (req.method === "GET") {
    // ë³€ìˆ˜ ì €ì¥
    const fileName = req.query.fileName as string;
    const getParams = {
        Bucket: s3Bucket,
        Key: fileName,
    }
    
    // getSignedUrlì˜ GetObjectCommandë¡œ ì´ë¯¸ì§€ì˜ URL ê²½ë¡œ ë°›ê¸°
    const url = await getSignedUrl(s3, new GetObjectCommand(getParams), {expiresIn: 3600})
    
    // JSONìœ¼ë¡œ URL ì „ë‹¬
    res.status(200).json({
        url: url,
        msg: "GET ìš”ì²­ ì„±ê³µ"
    });
}
```

#### API ì „ì²´ ì½”ë“œ

```jsx
import type { NextApiRequest, NextApiResponse } from 'next';
import { S3Client, PutObjectCommand, GetObjectCommand } from '@aws-sdk/client-s3';
import { getSignedUrl } from '@aws-sdk/s3-request-presigner';

export default async function handler(req: NextApiRequest, res: NextApiResponse) {
    // S3 í´ë¼ì´ì–¸íŠ¸ ì—°ê²°
    const s3 = new S3Client({
    	credentials: {
            accessKeyId: process.env.MY_AWS_ACCESS_KEY as string,
            secretAccessKey: process.env.MY_AWS_SECRET_KEY as string,
        },
        region: 'ap-northeast-2'
    });
    const s3Bucket = process.env.MY_AWS_S3_BUCKET as string;
    
    // POST ìš”ì²­ ì‹œ
    if (req.method === "POST") {
    	// ë³€ìˆ˜ ì €ì¥
        const fileName = req.body.fileName;
        const fileType = req.body.fileType;
        const putParams = {
            Bucket: s3Bucket,
            Key: fileName,
            ContentType: fileType,
        }

        // getSignedUrlì˜ PutObjectCommandë¡œ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•  URL ê²½ë¡œ ë°›ê¸°
        const url = await getSignedUrl(s3, new PutObjectCommand(putParams), {expiresIn: 3600});

        // JSONìœ¼ë¡œ URL ì „ë‹¬
        return res.status(200).json({
            url: url,
            msg: "POST ìš”ì²­ ì„±ê³µ"
        });
    }
    
    // GET ìš”ì²­ ì‹œ
    if (req.method === "GET") {
        // ë³€ìˆ˜ ì €ì¥
        const fileName = req.query.fileName as string;
        const getParams = {
            Bucket: s3Bucket,
            Key: fileName,
        }

        // getSignedUrlì˜ GetObjectCommandë¡œ ì´ë¯¸ì§€ì˜ URL ê²½ë¡œ ë°›ê¸°
        const url = await getSignedUrl(s3, new GetObjectCommand(getParams), {expiresIn: 3600})

        // JSONìœ¼ë¡œ URL ì „ë‹¬
        res.status(200).json({
            url: url,
            msg: "GET ìš”ì²­ ì„±ê³µ"
        });
    }
}
```

&nbsp;

### í…ŒìŠ¤íŠ¸

í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ Next.js í”„ë¡œì íŠ¸ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ Vercelì— ë°°í¬í–ˆëŠ”ë°, ë¬¸ì œì—†ì´ S3ì— ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ìš© í”„ë¡œì íŠ¸ì—ëŠ” ì œ ë‚˜ë¦„ëŒ€ë¡œì˜ ìŠ¤íƒ€ì¼ì„ ì…í˜€ë†”ì„œ, ìœ„ì— ë‹¨ìˆœí™”í•œ ì½”ë“œë³´ë‹¤ëŠ” ì¢€ ë” ë³µì¡í•˜ê²Œ ì½”ë“œê°€ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ìœ„ì— ì½”ë“œë‘ ë˜‘ê°™ì´ ì§°ëŠ”ë°ë„ ì‹¤í–‰ì´ ì•ˆëœë‹¤ë©´ ì—¬ê¸° ëˆŒëŸ¬ì„œ ì œê°€ ì‘ì„±í•œ ì½”ë“œë‘ ë¹„êµí•´ ë³´ì„¸ìš”! ê¸´ ê¸€ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ğŸ™‚

![í…ŒìŠ¤íŠ¸](/assets/img/2023-09-17-23/2023-09-17-23-8.gif)

&nbsp;

### ë ˆí¼ëŸ°ìŠ¤

- <a href="https://songsong.dev/entry/S3%EC%97%90-%ED%8C%8C%EC%9D%BC%EC%9D%84-%EC%97%85%EB%A1%9C%EB%93%9C%ED%95%98%EB%8A%94-%EC%84%B8-%EA%B0%80%EC%A7%80-%EB%B0%A9%EB%B2%95" target="_blank">S3ì— íŒŒì¼ì„ ì—…ë¡œë“œí•˜ëŠ” ì„¸ ê°€ì§€ ë°©ë²•</a>